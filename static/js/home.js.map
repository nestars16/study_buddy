{"version":3,"file":"home.js","sources":["webpack:///./static_sources/js/editorActions.js","webpack:///./static_sources/js/api.js","webpack:///./static_sources/js/index.js"],"sourcesContent":["export async function savePost(documentId, text) {\n  try {\n    const response = await fetch(\"/save\", {\n      method: \"PUT\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ document_id: documentId, text: text }),\n    });\n\n    if (response.status != 200) {\n      open_external_error_modal(response, await response.text());\n      return;\n    }\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n}\n\nexport async function deleteDocument(documentId) {\n  try {\n    const response = await fetch(`/delete_document?document_id=${documentId}`, {\n      method: \"DELETE\",\n      credentials: \"include\",\n    });\n\n    if (response.status != 200) {\n      open_external_error_modal(response, await response.text());\n      return;\n    }\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n}\n\nexport function highlight(editor, highlightEl) {\n  window.requestAnimationFrame(() => {\n    const highlighted = hljs.highlight(editor.value, {\n      language: \"markdown\",\n    }).value;\n    highlightEl.innerHTML = highlighted;\n  });\n}\n\nexport function resizeTextarea(textArea) {\n  if (!textArea) {\n    return;\n  }\n\n  window.requestAnimationFrame(() => {\n    textArea.style.height = 0;\n    if (textArea.scrollHeight > 0) {\n      textArea.style.height = `${textArea.scrollHeight + 2}px`;\n    }\n  });\n}\n\nexport function enableTabbing(event) {\n  if (event.key === \"Tab\") {\n    event.preventDefault();\n\n    editor.setRangeText(\n      \"  \",\n      editor.selectionStart,\n      editor.selectionStart,\n      \"end\",\n    );\n  }\n}\n\nexport function updateLineNumbers(event) {\n  const lineNumbers = document.querySelector(\".line-numbers\");\n\n  const numberOfLines = event.target.value.split(\"\\n\").length;\n\n  lineNumbers.innerHTML = Array(numberOfLines).fill(\"<span></span>\").join(\"\");\n}\n\nexport function closeDocumentCreationModal() {\n  const titleModal = document.getElementById(\"user-document-title-modal\");\n  titleModal.close();\n}\n\nexport function openDocumentTitleModal() {\n  const titleModal = document.getElementById(\"user-document-title-modal\");\n  titleModal.showModal();\n}\n\nexport function openUserActionsModal(modalTitle) {\n  const modal = document.getElementById(\"user-modal\");\n\n  modal.showModal();\n\n  const modal_h2 = document.getElementById(\"user-modal-title\");\n  modal_h2.textContent = modalTitle;\n\n  const rememberMeText = document.getElementById(\"remember-me\");\n  const forgotPasswordLink = document.getElementById(\"forgot-password\");\n\n  switch (modalTitle) {\n    case \"Register\":\n      const confirmPassword = document.getElementById(\n        \"password-confirmation-field\",\n      );\n\n      confirmPassword.classList.remove(\"hidden\");\n      rememberMeText.classList.add(\"hidden\");\n      forgotPasswordLink.classList.add(\"hidden\");\n      break;\n    case \"Log In\":\n      const toggleSwitch = document.getElementById(\"toggle-switch\");\n      toggleSwitch.classList.remove(\"hidden\");\n      rememberMeText.classList.remove(\"hidden\");\n\n      forgotPasswordLink.classList.remove(\"hidden\");\n\n      break;\n  }\n\n  modal.classList.remove(\"hidden\");\n}\n\nexport function closeUserActionModal() {\n  const userActionModal = document.getElementById(\"user-modal\");\n  const confirmPassword = document.getElementById(\n    \"password-confirmation-field\",\n  );\n  confirmPassword.classList.add(\"hidden\");\n  userActionModal.close();\n\n  const toggleSwitch = document.getElementById(\"toggle-switch\");\n\n  toggleSwitch.classList.add(\"hidden\");\n\n  const rememberMeText = document.getElementById(\"remember-me\");\n\n  rememberMeText.classList.add(\"hidden\");\n\n  const forgotPasswordLink = document.getElementById(\"forgot-password\");\n\n  forgotPasswordLink.classList.add(\"hidden\");\n}\n\nexport function closeErrorModal() {\n  const errorModal = document.getElementById(\"error-modal\");\n  errorModal.close();\n}\n\nexport function closeAllDocumentsModal() {\n  const allDocumentsModal = document.getElementById(\"all-documents-modal\");\n  allDocumentsModal.close();\n}\n\nexport function toggleMode() {\n  const body = document.querySelector(\"body\");\n  let currentMode = \"\";\n\n  const toggleModeInner = (dark_variant, light_variant, element) => {\n    if (element.classList.contains(dark_variant)) {\n      element.classList.remove(dark_variant);\n      element.classList.add(light_variant);\n    } else {\n      element.classList.remove(light_variant);\n      element.classList.add(dark_variant);\n    }\n  };\n\n  if (body.classList.contains(\"dark-mode-body\")) {\n    body.classList.remove(\"dark-mode-body\");\n    body.classList.add(\"light-mode-body\");\n    currentMode = \"light\";\n  } else {\n    body.classList.remove(\"light-mode-body\");\n    body.classList.add(\"dark-mode-body\");\n    currentMode = \"dark\";\n  }\n\n  const titles = document.querySelectorAll(\".user-modal-title\");\n\n  for (const title of titles) {\n    toggleModeInner(\"dark-user-modal-title\", \"light-user-modal-title\", title);\n  }\n\n  const modals = document.querySelectorAll(\".modal\");\n\n  for (const modal of modals) {\n    toggleModeInner(\"dark-mode-modal\", \"light-mode-modal\", modal);\n  }\n\n  const buttons = document.querySelectorAll(\".action-button\");\n\n  for (const button of buttons) {\n    if (button.id === \"all-documents\") {\n      continue;\n    }\n    toggleModeInner(\"dark-mode-button\", \"light-mode-button\", button);\n  }\n\n  const inputFields = [\n    document.getElementById(\"email-field\"),\n    document.getElementById(\"password-field\"),\n    document.getElementById(\"password-confirmation-field\"),\n    document.getElementById(\"document-title-field\"),\n  ];\n\n  for (const inputField of inputFields) {\n    toggleModeInner(\n      \"dark-mode-text-field\",\n      \"light-mode-text-field\",\n      inputField,\n    );\n  }\n\n  const editor = document.getElementById(\"editor\");\n  toggleModeInner(\"dark-mode-input\", \"light-mode-input\", editor);\n\n  const toggleButton = document.getElementById(\"toggle-modes\");\n  const moonIcon = document.getElementById(\"moon\");\n  const sunIcon = document.getElementById(\"sun\");\n\n  if (toggleButton.classList.contains(\"dark-mode-toggle\")) {\n    toggleButton.classList.remove(\"dark-mode-toggle\");\n    toggleButton.classList.add(\"light-mode-toggle\");\n    moonIcon.classList.add(\"hidden\");\n    sunIcon.classList.remove(\"hidden\");\n  } else {\n    toggleButton.classList.remove(\"light-mode-toggle\");\n    toggleButton.classList.add(\"dark-mode-toggle\");\n    sunIcon.classList.add(\"hidden\");\n    moonIcon.classList.remove(\"hidden\");\n  }\n\n  return currentMode;\n}\n\nlet globalTimeoutId = null;\n\nasync function changeToSelectedDocument(event, fetchFunction, documentArray) {\n  if (globalTimeoutId) {\n    clearInterval(globalTimeoutId);\n  }\n\n  const arrayId = event.target.id;\n  const { document_id, title } = documentArray[arrayId];\n  document.getElementById(\"document-title\").innerText = title;\n  const editor = document.getElementById(\"editor\");\n  const response = await fetchFunction(document_id);\n  editor.value = response;\n  document\n    .getElementById(\"editor\")\n    .dispatchEvent(new Event(\"input\", { bubbles: true }));\n  document.getElementById(\"document-close-button\").click();\n\n  globalTimeoutId = setInterval(() => {\n    savePost(document_id, document.getElementById(\"editor\").value);\n  }, 60000);\n}\n\nasync function deleteSelectedDocument(event, deleteFunction, documentArray) {\n  const arrayId = event.target.parentElement.id;\n\n  const { document_id } = documentArray[arrayId];\n\n  await deleteFunction(document_id);\n}\n\nexport function showUserPosts(documentArray, currentMode, fetchFunction) {\n  const documentModal = document.getElementById(\"document-section\");\n  documentModal.innerHTML = \"\";\n\n  for (const [index, value] of documentArray.entries()) {\n    const documentAnchor = document.createElement(\"a\");\n    const documentAnchorDelete = document.createElement(\"button\");\n    documentAnchorDelete.textContent = \"🗑️\";\n    documentAnchorDelete.classList.add(\"button-delete\");\n    documentAnchor.href = \"#\";\n    documentAnchor.id = index;\n\n    let classListName;\n\n    switch (currentMode) {\n      case \"dark\":\n        classListName = \"dark-mode-document-link\";\n        break;\n      case \"light\":\n        classListName = \"light-mode-document-link\";\n        break;\n    }\n\n    documentAnchor.classList.add(classListName);\n\n    documentAnchor.onclick = (event) => {\n      changeToSelectedDocument(event, fetchFunction, documentArray);\n    };\n\n    documentAnchorDelete.onclick = (event) => {\n      deleteSelectedDocument(event, deleteDocument, documentArray);\n      closeAllDocumentsModal();\n    };\n\n    documentAnchor.innerText = value.title;\n    documentAnchor.appendChild(documentAnchorDelete);\n\n    documentModal.appendChild(documentAnchor);\n\n    if (index !== documentArray.length - 1) {\n      documentModal.appendChild(document.createElement(\"hr\"));\n    }\n  }\n\n  document.getElementById(\"all-documents-modal\").showModal();\n\n  if (documentArray.length === 0) {\n    documentModal.innerText =\n      \"You have no documents, try creating some with the plus icon 🤓\";\n  }\n}\n\nexport function disableButtonAndShowSpinner(button, mode) {\n  let spinnerColor;\n  switch (mode) {\n    case \"light\":\n      spinnerColor = \"black\";\n      break;\n    case \"dark\":\n      spinnerColor = \"#FAFAFA\";\n      break;\n  }\n\n  button.style.borderTopColor = spinnerColor;\n  button.disabled = true;\n  button.classList.add(\"loading-button\");\n}\n\nexport function enableButtonAndRemoveSpinner(button) {\n  button.disabled = false;\n  button.classList.remove(\"loading-button\");\n}\n\nexport function enableLoadingScreen() {\n  const overlay = document.querySelector(\".overlay\");\n  overlay.classList.remove(\"hidden\");\n  overlay.classList.add(\"loading-overlay\");\n}\n\nexport function disableLoadingScreen() {\n  const overlay = document.querySelector(\".overlay\");\n  overlay.classList.add(\"hidden\");\n  overlay.classList.remove(\"loading-overlay\");\n}\n\nexport function enableUserModalShake(modal) {\n  modal.classList.add(\"error-shake-modal\");\n}\n","import {\n  enableButtonAndRemoveSpinner,\n  closeDocumentCreationModal,\n  enableUserModalShake,\n} from \"./editorActions.js\";\n\nexport async function downloadMarkdownToPDF(html_body, css_stylings) {\n  try {\n    const serverResponse = await fetch(\"/download\", {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        html: html_body,\n        css: css_stylings,\n      }),\n    });\n\n    const SUCCESS = 200;\n\n    if (serverResponse.status != SUCCESS) {\n      open_external_error_modal(serverResponse, await serverResponse.text());\n      return;\n    }\n\n    const jsonResponse = await serverResponse.json();\n    const anchor_download = document.createElement(\"a\");\n    anchor_download.href = jsonResponse.data.url;\n    anchor_download.download = jsonResponse.data.url;\n    anchor_download.target = \"_blank\";\n    anchor_download.click();\n    const downloadButton = document.getElementById(\"download\");\n    enableButtonAndRemoveSpinner(downloadButton);\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n}\n\nexport function getCookiesObject() {\n  const cookiesObject = document.cookie.split(\"; \").reduce((prev, current) => {\n    const [name, ...value] = current.split(\"=\");\n    prev[name] = value.join(\"=\");\n    return prev;\n  }, {});\n\n  return cookiesObject;\n}\n\nexport function checkForLogInUser() {\n  const cookiesObject = getCookiesObject();\n\n  document.getElementById(\"log-out\").classList.add(\"hidden\");\n  document.getElementById(\"add-document\").classList.add(\"hidden\");\n  document.getElementById(\"all-documents\").classList.add(\"hidden\");\n\n  if (cookiesObject.session_id) {\n    document.getElementById(\"sign-up\").classList.add(\"hidden\");\n    document.getElementById(\"log-in\").classList.add(\"hidden\");\n    document.getElementById(\"log-out\").classList.remove(\"hidden\");\n    document.getElementById(\"add-document\").classList.remove(\"hidden\");\n    document.getElementById(\"all-documents\").classList.remove(\"hidden\");\n  }\n}\n\nexport async function sendLogIn(username, password, wantsToBeRemembered) {\n  const modalError = document.getElementById(\"modal-error\");\n\n  try {\n    const response = await fetch(\"/log_in\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email: username,\n        password: password,\n        wants_to_be_remembered: wantsToBeRemembered,\n      }),\n    });\n\n    if (response.status != 200) {\n      const responseText = await response.text();\n      enableUserModalShake(document.getElementById(\"user-modal\"));\n      enableButtonAndRemoveSpinner(document.getElementById(\"submit-button\"));\n      modalError.textContent = responseText;\n      return;\n    }\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n\n  location.reload();\n}\n\nexport async function createUser(username, password, confirmPassword) {\n  const modalError = document.getElementById(\"modal-error\");\n\n  const passwordRegex = /(?=.*[A-Za-z])(?=.*\\d).{8,}$/;\n\n  if (!password.match(passwordRegex)) {\n    modalError.textContent =\n      \"Password must contain minimum eight characters\\nat least one letter and one number\";\n    enableButtonAndRemoveSpinner(document.getElementById(\"submit-button\"));\n    enableUserModalShake(document.getElementById(\"user-modal\"));\n    return;\n  }\n\n  if (password !== confirmPassword) {\n    modalError.textContent = \"Passwords dont match\";\n    enableButtonAndRemoveSpinner(document.getElementById(\"submit-button\"));\n    enableUserModalShake(document.getElementById(\"user-modal\"));\n    return;\n  }\n\n  try {\n    const response = await fetch(\"/create_user\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email: username, password: password }),\n    });\n\n    if (response.status != 201) {\n      const responseText = await response.text();\n      enableButtonAndRemoveSpinner(document.getElementById(\"submit-button\"));\n      enableUserModalShake(document.getElementById(\"user-modal\"));\n      modalError.textContent = responseText;\n      return;\n    }\n\n    location.reload();\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n}\n\nexport async function submitButtonAction() {\n  document.getElementById(\"modal-error\").textContent = \"\";\n\n  const modalType = document.querySelector(\".user-modal-title\").textContent;\n  const email = document.getElementById(\"email-field\").value;\n  const password = document.getElementById(\"password-field\").value;\n  const errorMessage = document.getElementById(\"modal-error\");\n  const fieldsArentFilled = !(email && password);\n\n  switch (modalType) {\n    case \"Log In\":\n      const wantsToBeRemembered =\n        document.querySelector(\".toggle__input\").checked;\n\n      if (fieldsArentFilled) {\n        errorMessage.textContent = \"All fields are required\";\n        enableButtonAndRemoveSpinner(document.getElementById(\"submit-button\"));\n        enableUserModalShake(document.getElementById(\"user-modal\"));\n        return;\n      }\n      await sendLogIn(email, password, wantsToBeRemembered);\n      break;\n    case \"Register\":\n      const confirmPassword = document.getElementById(\n        \"password-confirmation-field\",\n      ).value;\n\n      if (fieldsArentFilled || !confirmPassword) {\n        errorMessage.textContent = \"All fields are required\";\n        enableUserModalShake(document.getElementById(\"user-modal\"));\n        enableButtonAndRemoveSpinner(document.getElementById(\"submit-button\"));\n        return;\n      }\n\n      await createUser(email, password, confirmPassword);\n      break;\n  }\n\n  const submitButton = document.getElementById(\"submit-button\");\n  enableButtonAndRemoveSpinner(submitButton);\n}\n\nexport async function logOut() {\n  try {\n    const response = await fetch(\"/log_out\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({}),\n    });\n\n    if (response.status != 200) {\n      open_external_error_modal(response, await response.text());\n      enableButtonAndRemoveSpinner(document.getElementById(\"log-out\"));\n      return;\n    }\n\n    location.reload();\n  } catch (error) {\n    enableButtonAndRemoveSpinner(document.getElementById(\"log-out\"));\n    open_external_error_modal(null, error);\n  }\n}\n\nexport async function createDocument(title) {\n  try {\n    const response = await fetch(\"/create_document\", {\n      method: \"POST\",\n      credentials: \"include\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ title: title }),\n    });\n\n    if (response.status != 200) {\n      document\n        .getElementById(\"user-document-title-modal\")\n        .classList.add(\"hidden\");\n      document.querySelector(\".overlay\").classList.remove(\"hidden\");\n      open_external_error_modal(response, await response.text());\n      return;\n    }\n\n    const jsonResponse = await response.json();\n    console.log(jsonResponse);\n\n    document.getElementById(\"document-title\").textContent = title;\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n\n  closeDocumentCreationModal();\n  const submit = document.getElementById(\"document-title-submit\");\n  enableButtonAndRemoveSpinner(submit);\n}\n\nexport async function fetchUserDocuments() {\n  try {\n    const response = await fetch(\"/fetch_documents\", {\n      method: \"GET\",\n      credentials: \"include\",\n    });\n\n    if (response.status != 200) {\n      open_external_error_modal(response, await response.text());\n      return;\n    }\n\n    return await response.json();\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n}\n\nexport async function fetchCurrentDocumentContent(doc_id) {\n  const URL = `/fetch_content?document_id=${doc_id}`;\n\n  try {\n    const response = await fetch(URL, {\n      method: \"GET\",\n      credentials: \"include\",\n    });\n\n    if (response.status != 200) {\n      open_external_error_modal(response, await response.text());\n      return;\n    }\n\n    return await response.json();\n  } catch (error) {\n    open_external_error_modal(null, error);\n  }\n}\n\nfunction open_external_error_modal(serverResponse, text) {\n  if (!serverResponse) {\n    serverResponse.status = \"No status code\";\n  }\n\n  const errorModal = document.getElementById(\"error-modal\");\n\n  errorModal.show();\n\n  document.getElementById(\"error-message\").textContent =\n    `Error code : ${serverResponse.status} - ${text}`;\n}\n","import {\n  highlight,\n  resizeTextarea,\n  enableTabbing,\n  updateLineNumbers,\n  openUserActionsModal,\n  closeUserActionModal,\n  closeErrorModal,\n  closeAllDocumentsModal,\n  closeDocumentCreationModal,\n  toggleMode,\n  openDocumentTitleModal,\n  showUserPosts,\n  disableButtonAndShowSpinner,\n  enableLoadingScreen,\n  disableLoadingScreen,\n} from \"./editorActions.js\";\nimport {\n  downloadMarkdownToPDF,\n  submitButtonAction,\n  checkForLogInUser,\n  logOut,\n  createDocument,\n  fetchUserDocuments,\n  fetchCurrentDocumentContent,\n} from \"./api.js\";\n(\"use strict\");\nconst MAX_WS_RECONNECTION_ATTEMPTS = 5;\nconst WS_RECONNECTION_DELAY = 2000;\n\nlet currentMode = \"dark\";\nlet reconnectionAttempts = 0;\nconst highlightEl = document.getElementById(\"highlight\");\nconst editor = document.getElementById(\"editor\");\neditor.textContent = \"\";\nconst display = document.getElementById(\"markdown-display\");\nlet currentDocuments = [];\nlet refreshMathTexCounter = 10;\n\nconst url = new URL(\"/refresh\", window.location.href);\nurl.protocol = url.protocol.replace(\"http\", \"ws\");\nconst webSocketConnection = new WebSocket(url.href);\nsetupWebSocketHandlers();\n\nfunction setupWebSocketHandlers() {\n  webSocketConnection.onmessage = (event) => {\n    display.innerHTML = event.data;\n  };\n\n  webSocketConnection.onopen = () => {\n    webSocketConnection.send(editor.value);\n    reconnectionAttempts = 0; // Reset attempts after a successful connection\n  };\n\n  function attemptReconnect() {\n    if (reconnectionAttempts >= MAX_WS_RECONNECTION_ATTEMPTS) {\n      console.error(\"Max reconnection attempts reached. Could not reconnect.\");\n      return;\n    }\n\n    ++reconnectionAttempts;\n\n    setTimeout(() => {\n      webSocketConnection = new WebSocket(url.href);\n      setupWebSocketHandlers(); // Reassign handlers to the new websocket instance\n    }, WS_RECONNECTION_DELAY);\n  }\n\n  webSocketConnection.onerror = (e) => {\n    console.error(`Connection error: ${JSON.stringify(e)}`);\n    attemptReconnect();\n  };\n\n  webSocketConnection.onclose = () => {\n    console.error(\"Connection closed\");\n    attemptReconnect();\n  };\n}\n\nasync function initialSetup() {\n  const toggleModesButton = document.getElementById(\"toggle-modes\");\n  const downloadButton = document.getElementById(\"download\");\n  const registerButton = document.getElementById(\"sign-up\");\n  const logInButton = document.getElementById(\"log-in\");\n  const submitButton = document.getElementById(\"submit-button\");\n  const logOutButton = document.getElementById(\"log-out\");\n  const addButton = document.getElementById(\"add-document\");\n  const documentTitleSubmit = document.getElementById(\"document-title-submit\");\n  const documentTitleForm = document.getElementById(\"document-title-form\");\n  const showAllDocumentsButton = document.getElementById(\"all-documents\");\n  const errorCloseButton = document.getElementById(\"error-modal-close\");\n  const forgotPasswordLink = document.getElementById(\"forgot-password\");\n\n  forgotPasswordLink.onclick = () => {\n    closeUserActionModal();\n  };\n  const allDocumentsCloseButton = document.getElementById(\n    \"document-close-button\",\n  );\n  const addDocumentCloseButton = document.getElementById(\n    \"user-document-title-close\",\n  );\n  const userActionModalClose = document.getElementById(\"user-modal-close\");\n  const userModal = document.getElementById(\"user-modal\");\n\n  userActionModalClose.onclick = closeUserActionModal;\n  errorCloseButton.onclick = closeErrorModal;\n  allDocumentsCloseButton.onclick = closeAllDocumentsModal;\n  addDocumentCloseButton.onclick = closeDocumentCreationModal;\n\n  userModal.addEventListener(\"animationend\", () => {\n    setTimeout(() => {\n      userModal.classList.remove(\"error-shake-modal\");\n    }, 200);\n  });\n\n  showAllDocumentsButton.onclick = async () => {\n    enableLoadingScreen();\n    currentDocuments = await fetchUserDocuments();\n    disableLoadingScreen();\n    showUserPosts(currentDocuments, currentMode, fetchCurrentDocumentContent);\n  };\n\n  addButton.onclick = openDocumentTitleModal;\n\n  documentTitleForm.onsubmit = (event) => {\n    event.preventDefault();\n  };\n\n  documentTitleSubmit.onclick = async () => {\n    if (!document.getElementById(\"document-title-field\").value) {\n      return;\n    }\n\n    disableButtonAndShowSpinner(documentTitleSubmit, currentMode);\n\n    await createDocument(document.getElementById(\"document-title-field\").value);\n  };\n\n  submitButton.onclick = async (event) => {\n    event.preventDefault();\n    disableButtonAndShowSpinner(submitButton, currentMode);\n    submitButton.disabled = true;\n    await submitButtonAction();\n  };\n\n  toggleModesButton.onclick = () => {\n    currentMode = toggleMode(currentMode);\n  };\n\n  logOutButton.onclick = async () => {\n    disableButtonAndShowSpinner(logOutButton, currentMode);\n    await logOut();\n  };\n\n  registerButton.onclick = () => {\n    openUserActionsModal(\"Register\");\n  };\n\n  logInButton.onclick = () => {\n    openUserActionsModal(\"Log In\");\n  };\n\n  editor.setAttribute(\"data-initialized\", true);\n\n  editor.oninput = () => {\n    highlight(editor, highlightEl);\n    webSocketConnection.send(editor.value);\n    resizeTextarea(editor);\n    refreshMathTexCounter += 1;\n  };\n\n  editor.onkeyup = updateLineNumbers;\n\n  editor.onkeydown = enableTabbing;\n\n  downloadButton.onclick = async () => {\n    disableButtonAndShowSpinner(downloadButton, currentMode);\n    await downloadMarkdownToPDF(display.innerHTML, currentMode);\n  };\n\n  resizeTextarea(editor);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  resizeTextarea(editor);\n  highlight(editor, highlight);\n  initialSetup();\n  checkForLogInUser();\n  setInterval(() => {\n    if (refreshMathTexCounter === 0) {\n      renderMathInElement(document.body, {\n        delimiters: [\n          { left: \"$$\", right: \"$$\", display: true },\n          { left: \"$\", right: \"$\", display: false },\n          { left: \"\\\\(\", right: \"\\\\)\", display: false },\n          { left: \"\\\\[\", right: \"\\\\]\", display: true },\n        ],\n        throwOnError: false,\n      });\n    }\n    if (refreshMathTexCounter > 0) {\n      refreshMathTexCounter -= 1;\n    }\n  }, 150);\n});\n"],"names":["savePost","documentId","text","response","fetch","JSON","open_external_error_modal","error","deleteDocument","highlight","editor","highlightEl","window","highlighted","hljs","resizeTextarea","textArea","enableTabbing","event","updateLineNumbers","lineNumbers","document","numberOfLines","Array","closeDocumentCreationModal","titleModal","openDocumentTitleModal","openUserActionsModal","modalTitle","modal","modal_h2","rememberMeText","forgotPasswordLink","confirmPassword","toggleSwitch","closeUserActionModal","userActionModal","closeErrorModal","errorModal","closeAllDocumentsModal","allDocumentsModal","globalTimeoutId","changeToSelectedDocument","fetchFunction","documentArray","clearInterval","document_id","title","Event","setInterval","deleteSelectedDocument","deleteFunction","disableButtonAndShowSpinner","button","mode","spinnerColor","enableButtonAndRemoveSpinner","enableUserModalShake","downloadMarkdownToPDF","html_body","css_stylings","serverResponse","jsonResponse","anchor_download","downloadButton","sendLogIn","username","password","wantsToBeRemembered","modalError","responseText","location","createUser","submitButtonAction","modalType","email","errorMessage","fieldsArentFilled","logOut","createDocument","console","fetchUserDocuments","fetchCurrentDocumentContent","doc_id","URL","reconnectionAttempts","display","currentDocuments","refreshMathTexCounter","url","webSocketConnection","WebSocket","setupWebSocketHandlers","attemptReconnect","setTimeout","e","initialSetup","toggleModesButton","registerButton","logInButton","submitButton","logOutButton","addButton","documentTitleSubmit","documentTitleForm","showAllDocumentsButton","errorCloseButton","allDocumentsCloseButton","addDocumentCloseButton","userActionModalClose","userModal","enableLoadingScreen","overlay","disableLoadingScreen","showUserPosts","currentMode","documentModal","index","value","classListName","documentAnchor","documentAnchorDelete","toggleMode","body","toggleModeInner","dark_variant","light_variant","element","inputField","toggleButton","moonIcon","sunIcon","checkForLogInUser","cookiesObject","prev","current","name","renderMathInElement"],"mappings":"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"}